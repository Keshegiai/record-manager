<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Record Manager</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">
    <!-- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="toast" class="toast hidden">
        <span id="toastIcon">‚úÖ</span>
        <span id="toastMessage">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</span>
    </div>

    <div id="mainView">
        <div class="header">
            <div class="top-row">
                <div class="title-section">
                    <div class="logo">üìù</div>
                    <div class="title-info">
                        <h3 id="t-appTitle">–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–ø–∏—Å–µ–π</h3>
                        <span class="record-count" id="recordCount">0 –∑–∞–ø–∏—Å–µ–π</span>
                    </div>
                </div>
                <div class="controls">
                    <select id="langSelect" class="lang-select">
                        <option value="ru">RU</option>
                        <option value="kk">KZ</option>
                        <option value="en">EN</option>
                    </select>

                    <button id="themeBtn" class="icon-btn" title="–¢–µ–º–∞"></button>
                    <button id="settingsBtn" class="icon-btn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"></button>
                </div>
            </div>

            <div class="search-bar">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input type="text" id="searchInput" placeholder="–ù–∞–π—Ç–∏ –∑–∞–ø–∏—Å—å...">
                <div class="sort-dropdown">
                    <button id="sortBtn" class="icon-btn-small" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 6h18M6 12h12M9 18h6"/>
                        </svg>
                    </button>
                    <div class="sort-menu hidden" id="sortMenu">
                        <div class="sort-option active" data-sort="date-desc">üìÖ –°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</div>
                        <div class="sort-option" data-sort="date-asc">üìÖ –°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</div>
                        <div class="sort-option" data-sort="alpha-asc">üî§ –ê-–Ø</div>
                        <div class="sort-option" data-sort="alpha-desc">üî§ –Ø-–ê</div>
                    </div>
                </div>
            </div>

            <div id="filterContainer" class="filters-scroll"></div>
        </div>

        <div class="editor-card">
            <div class="editor-inner">
                <div class="editor-header">
                    <span class="cat-label" id="t-catLabel">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</span>

                    <div class="custom-select" id="customSelect">
                        <div class="select-trigger">
                            <span class="category-color-dot" id="selectedColorDot"></span>
                            <span id="selectedValue">–í—ã–±—Ä–∞—Ç—å...</span>
                            <svg class="select-arrow" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                        </div>
                        <div class="select-options" id="selectOptions">
                        </div>
                    </div>
                    <input type="hidden" id="categoryInput">
                </div>
                <div class="textarea-wrapper">
                    <textarea id="promptInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–ø–∏—Å–∏..."></textarea>
                    <span class="char-count" id="charCount">0</span>
                </div>
                <div class="editor-actions">
                    <button id="clearBtn" class="clear-btn" title="–û—á–∏—Å—Ç–∏—Ç—å">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                    <button id="saveBtn" class="action-btn">
                        <span id="t-saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
        <div id="emptyState" class="empty-state hidden">
            <div class="empty-illustration">
                <svg viewBox="0 0 200 200" fill="none">
                    <circle cx="100" cy="100" r="80" fill="var(--accent-glow)" opacity="0.3"/>
                    <rect x="60" y="50" width="80" height="100" rx="8" fill="var(--card-bg)" stroke="var(--accent)" stroke-width="2"/>
                    <line x1="75" y1="75" x2="125" y2="75" stroke="var(--text-secondary)" stroke-width="3" stroke-linecap="round"/>
                    <line x1="75" y1="95" x2="115" y2="95" stroke="var(--text-secondary)" stroke-width="3" stroke-linecap="round"/>
                    <line x1="75" y1="115" x2="105" y2="115" stroke="var(--text-secondary)" stroke-width="3" stroke-linecap="round"/>
                    <circle cx="145" cy="130" r="25" fill="var(--accent)"/>
                    <path d="M137 130h16M145 122v16" stroke="white" stroke-width="3" stroke-linecap="round"/>
                </svg>
            </div>
            <h4 id="t-emptyTitle">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</h4>
            <p id="t-emptyDesc">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</p>
        </div>

        <div id="promptsList" class="prompts-list"></div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="editModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="t-editTitle">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                <button id="closeModal" class="icon-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="edit-category-row">
                    <span class="cat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</span>
                    <div class="custom-select" id="editCategorySelect">
                        <div class="select-trigger">
                            <span class="category-color-dot" id="editSelectedColorDot"></span>
                            <span id="editSelectedValue">–í—ã–±—Ä–∞—Ç—å...</span>
                            <svg class="select-arrow" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                        </div>
                        <div class="select-options" id="editSelectOptions"></div>
                    </div>
                </div>
                <textarea id="editTextarea" placeholder="–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Å–∏..."></textarea>
                <div class="edit-char-count"><span id="editCharCount">0</span></div>
            </div>
            <div class="modal-footer">
                <button id="cancelEdit" class="secondary-btn">–û—Ç–º–µ–Ω–∞</button>
                <button id="saveEdit" class="action-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Undo —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="undoBar" class="undo-bar hidden">
        <span id="t-undoText">–ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞</span>
        <button id="undoBtn" class="undo-btn">–û—Ç–º–µ–Ω–∏—Ç—å</button>
    </div>

    <div id="settingsView" class="hidden">
        <div class="header">
            <div class="top-row">
                <button id="backBtn" class="nav-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                    <span id="t-backBtn">–ù–∞–∑–∞–¥</span>
                </button>
                <h3 id="t-settingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            </div>
        </div>

        <div class="settings-card">
            <h4 class="settings-section-title" id="t-categoriesTitle">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
            <div class="add-cat-row">
                <div class="color-picker-wrapper">
                    <input type="color" id="newCatColor" value="#3b82f6" class="color-picker">
                </div>
                <input type="text" id="newCatInput" placeholder="–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è">
                <button id="addCatBtn" class="icon-btn-plus">+</button>
            </div>
            <div class="divider"></div>
            <div id="categoriesList" class="settings-list"></div>
        </div>

        <div class="settings-card">
            <h4 class="settings-section-title" id="t-dataTitle">–î–∞–Ω–Ω—ã–µ</h4>
            <div class="data-actions">
                <button id="exportBtn" class="data-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <span id="t-exportBtn">–≠–∫—Å–ø–æ—Ä—Ç</span>
                </button>
                <button id="importBtn" class="data-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <span id="t-importBtn">–ò–º–ø–æ—Ä—Ç</span>
                </button>
                <input type="file" id="importFile" accept=".json" class="hidden">
            </div>
        </div>
    </div>

</div>
<script src="popup.js"></script>
</body>
</html>